name: decomp-progress

on:
  push:
    paths:
      - "decomp/**"
      - ".github/workflows/decomp-progress.yml"
  pull_request:
    paths:
      - "decomp/**"
      - ".github/workflows/decomp-progress.yml"

jobs:
  tooling:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - name: Python syntax check
        run: |
          python -m py_compile decomp/tools/*.py
      - name: Queue progress summary
        run: |
          python decomp/tools/report_progress.py --version GC_USA --out decomp/build/GC_USA/progress_summary.md
      - name: Upload summary artifact
        uses: actions/upload-artifact@v4
        with:
          name: decomp-progress-summary
          path: decomp/build/GC_USA/progress_summary.md
